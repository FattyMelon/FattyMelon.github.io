
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Simon&#39; Blog">
    <title>smallpt详解(三) - Simon&#39; Blog</title>
    <meta name="author" content="Simon chen">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="本文主要对smallpt的光线跟踪函数进行详细的解释">
<meta property="og:type" content="blog">
<meta property="og:title" content="smallpt详解(三)">
<meta property="og:url" content="https://fattymelon.github.io/2017/04/25/raytracing3/index.html">
<meta property="og:site_name" content="Simon&#39; Blog">
<meta property="og:description" content="本文主要对smallpt的光线跟踪函数进行详细的解释">
<meta property="og:image" content="http://img.blog.csdn.net/20170408210135631?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTM4MDg4MDMwNA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170408210727109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTM4MDg4MDMwNA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170408210736953?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTM4MDg4MDMwNA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:updated_time" content="2017-05-25T06:57:59.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallpt详解(三)">
<meta name="twitter:description" content="本文主要对smallpt的光线跟踪函数进行详细的解释">
<meta name="twitter:image" content="http://img.blog.csdn.net/20170408210135631?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTM4MDg4MDMwNA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
    
    
        
    
    
        <meta property="og:image" content="https://fattymelon.github.io/assets/images/me.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-sxklfps8ywgfyyjcowvnb4gxdgt0zjts3hsguljmv9uqanxjbnitrovtbrek.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Simon&#39; Blog</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/me.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/me.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Simon chen</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Good good study, day day up.  :D </p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/FattyMelon" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            smallpt详解(三)
        </h1>
    
    
        <div class="post-meta">
    <time itemprop="datePublished" datetime="2017-04-25T14:26:55+08:00">
	
		    Apr 25, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/光线跟踪/">光线跟踪</a>


    
</div>

    
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>本文主要对smallpt的光线跟踪函数进行详细的解释<br><a id="more"></a></p>
<h2 id="1-光线跟踪详细解释"><a href="#1-光线跟踪详细解释" class="headerlink" title="1. 光线跟踪详细解释"></a>1. 光线跟踪详细解释</h2><p>计算法向量，计算折射光线，反射光线等，可以查阅《3D数学基础，图形与游戏开发》</p>
<h3 id="1-1-计算部分"><a href="#1-1-计算部分" class="headerlink" title="1.1 计算部分"></a>1.1 计算部分</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function">Vec <span class="title">radiance</span><span class="params">(<span class="keyword">const</span> Ray &amp;r, <span class="keyword">int</span> depth, <span class="keyword">unsigned</span> <span class="keyword">short</span> *Xi)</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> t;                               <span class="comment">// 与射线相交物体的距离</span></div><div class="line">    <span class="keyword">int</span> id = <span class="number">0</span>;                               <span class="comment">// 与射线相交物体的id</span></div><div class="line">    <span class="keyword">if</span> (!intersect(r, t, id)) </div><div class="line">        <span class="keyword">return</span> Vec(); <span class="comment">// 如果都没有相交，则返回emisson(0, 0, 0)</span></div><div class="line">    <span class="keyword">const</span> Sphere &amp;obj = spheres[id];        <span class="comment">// the hit object </span></div><div class="line">    Vec x = r.o + r.d*t, n = (x - obj.position).norm(); <span class="comment">// 计算n,球面法向量</span></div><div class="line">    Vec nl = n.dot(r.d) &lt; <span class="number">0</span> ? n : n*<span class="number">-1</span>, f = obj.color;</div><div class="line">    <span class="keyword">double</span> p = f.x&gt;f.y &amp;&amp; f.x&gt;f.z ? f.x : f.y&gt;f.z ? f.y : f.z; <span class="comment">// 找出最大的值</span></div><div class="line">    <span class="keyword">if</span> (++depth&gt;<span class="number">5</span>||!p) </div><div class="line">        <span class="keyword">if</span> (erand48(Xi)&lt;p) </div><div class="line">            f = f*(<span class="number">1</span> / p); <span class="comment">//假设f为(0.5, 0.2, 0.2)，那么作者假定这个表面的反射率为f*(1/0.5)，也就是颜色值最大的反射率最高(1, 0.4, 0.4)</span></div><div class="line">        <span class="keyword">else</span>  </div><div class="line">            <span class="keyword">return</span> obj.emission;</div></pre></td></tr></table></figure>
<h3 id="1-2-漫反射"><a href="#1-2-漫反射" class="headerlink" title="1.2 漫反射"></a>1.2 漫反射</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (obj.refl == DIFF) &#123;                  <span class="comment">// 如果物体的反射属性是漫反射 </span></div><div class="line">    <span class="keyword">double</span> r1 = <span class="number">2</span> * M_PI*erand48(Xi), r2 = erand48(Xi), r2s = <span class="built_in">sqrt</span>(r2); <span class="comment">//取随机数</span></div><div class="line">    Vec w = nl, u = ((<span class="built_in">fabs</span>(w.x)&gt;<span class="number">.1</span> ? Vec(<span class="number">0</span>, <span class="number">1</span>) : Vec(<span class="number">1</span>)).cross(w)).norm(), v = w.cross(u);  <span class="comment">//w，v，u为正交基</span></div><div class="line">    Vec d = (u*<span class="built_in">cos</span>(r1)*r2s + v*<span class="built_in">sin</span>(r1)*r2s + w*<span class="built_in">sqrt</span>(<span class="number">1</span> - r2)).norm(); <span class="comment">//求得一个随机的漫反射光线，继续迭代</span></div><div class="line">    <span class="keyword">return</span> obj.emission + f.mult(radiance(Ray(x, d), depth, Xi));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="1-3-镜面反射光"><a href="#1-3-镜面反射光" class="headerlink" title="1.3 镜面反射光"></a>1.3 镜面反射光</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (obj.refl == SPEC)            <span class="comment">// 如果物体的反射属性是漫反射 </span></div><div class="line">        <span class="keyword">return</span> obj.emission + f.mult(radiance(Ray(x, r.d - n * <span class="number">2</span> * n.dot(r.d)), depth, Xi)); <span class="comment">//这个比较简单，只要求得反射光的角度即可</span></div></pre></td></tr></table></figure>
<h3 id="1-4-折射加反射"><a href="#1-4-折射加反射" class="headerlink" title="1.4 折射加反射"></a>1.4 折射加反射</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Ray reflRay(x, r.d - n * 2 * n.dot(r.d));     // 由平行四边形的方法求得反射光的direction</div><div class="line">    bool into = n.dot(nl)&gt;0;                // 判断光线是否是进入球体</div><div class="line">    double nc = 1, nt = 1.5, nnt = into ? nc / nt : nt / nc, ddn = r.d.dot(nl), cos2t;</div><div class="line">    if ((cos2t = 1 - nnt*nnt*(1 - ddn*ddn))&lt;0)    // 如果求得cos2t&lt;0，就没必要进行折射了。</div><div class="line">        return obj.emission + f.mult(radiance(reflRay, depth, Xi));</div><div class="line">    Vec tdir = (r.d*nnt - n*((into ? 1 : -1)*(ddn*nnt + sqrt(cos2t)))).norm(); //折射角的角度</div><div class="line">    double a = nt - nc, b = nt + nc, R0 = a*a / (b*b), c = 1 - (into ? -ddn : tdir.dot(n));</div><div class="line">    double Re = R0 + (1 - R0)*c*c*c*c*c, Tr = 1 - Re, P = .25 + .5*Re, RP = Re / P, TP = Tr / (1 - P);</div><div class="line">    return obj.emission + f.mult(depth&gt;2 ? (erand48(Xi)&lt;P ?   // 轮盘赌</div><div class="line">        radiance(reflRay, depth, Xi)*RP : radiance(Ray(x, tdir), depth, Xi)*TP) :</div><div class="line">        radiance(reflRay, depth, Xi)*Re + radiance(Ray(x, tdir), depth, Xi)*Tr);</div></pre></td></tr></table></figure>
<h2 id="2-加烟雾效果"><a href="#2-加烟雾效果" class="headerlink" title="2 加烟雾效果"></a>2 加烟雾效果</h2><p>学习完smallpt之后，看到图形学的书上提到了烟雾效果。<br><img src="http://img.blog.csdn.net/20170408210135631?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTM4MDg4MDMwNA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>编程实现<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> E_MATH       2.71828</span></div><div class="line"><span class="function">Vector <span class="title">frog_color</span><span class="params">(<span class="number">0.7</span>, <span class="number">0.7</span>, <span class="number">0.7</span>)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">f_atmo</span><span class="params">(<span class="keyword">double</span> distance)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">pow</span>(E_MATH, -(<span class="number">0.01</span> * <span class="number">0.01</span>* distance * distance));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 然后修改光线反射，折射中的代码</span></div><div class="line"><span class="comment">// 在这个实现中，我只在第一层的递归加了烟雾效果</span></div><div class="line"><span class="comment">// 修改漫反射的代码</span></div><div class="line">        <span class="keyword">if</span> (depth &lt;= <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">double</span> fTemp = f_atmo(distance);</div><div class="line">            <span class="keyword">return</span> obj._emission + (radiance(Ray(hit_point, direct), depth)) * fTemp + frog_color*(<span class="number">1</span> - fTemp);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> </div><div class="line">            <span class="keyword">return</span> obj._emission + f.mult(radiance(Ray(hit_point, direct), depth));</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 修改反射</span></div><div class="line"><span class="keyword">if</span> (depth &lt;= <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">double</span> fTemp = f_atmo(distance);</div><div class="line">            <span class="keyword">return</span> obj._emission + (radiance(Ray(hit_point, direct_refl), depth)) * fTemp + frog_color*(<span class="number">1</span> - fTemp);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            <span class="keyword">return</span> obj._emission + radiance(Ray(hit_point, direct_refl), depth);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 修改折射</span></div><div class="line">        <span class="keyword">double</span> fTemp = f_atmo(distance);</div><div class="line">            <span class="keyword">return</span> ((radiance(ray_refl, depth) * Fe</div><div class="line">                + radiance(ray_refr, depth) * Fr))*fTemp + frog_color*(<span class="number">1</span> - fTemp);</div></pre></td></tr></table></figure></p>
<p>效果图1，无烟雾</p>
<p><img src="http://img.blog.csdn.net/20170408210727109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTM4MDg4MDMwNA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>效果图2，加烟雾，可以看出后面那个大球的轮廓。感觉像现在中国最流行的雾霾。 :D<br><img src="http://img.blog.csdn.net/20170408210736953?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTM4MDg4MDMwNA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        <div class="post-footer-tags">
            
            </br>
            <span id="busuanzi_container_page_pv" class="text-color-light text-small">
            Viewd <span id="busuanzi_value_page_pv"></span> times
            </span>
        </div>
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/05/24/hexo_access/"  data-tooltip="Hexo接入Gitment评论">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/04/22/raytracing2/" data-tooltip="smallpt详解(二)">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-facebook-official"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-google-plus"></i>
                </a>
            </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
            
                <div id="container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  owner: 'FattyMelon',
  repo: 'FattyMelon.github.io',
  oauth: {
    client_id: 'ae5e1fbec7bfdd022624',
    client_secret: '20d776f046a5cfca506202f4f5116d7d1c041942',
  },
})
gitment.render('container')
</script>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 Simon chen. All Rights Reserved.
    </span>

    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/05/24/hexo_access/"  data-tooltip="Hexo接入Gitment评论">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/04/22/raytracing2/" data-tooltip="smallpt详解(二)">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-facebook-official"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-google-plus"></i>
                </a>
            </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-twitter"></i><span>Share on Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://fattymelon.github.io/2017/04/25/raytracing3/">
                    <i class="fa fa-google-plus"></i><span>Share on Google+</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/me.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Simon chen</h4>
        
            <div id="about-card-bio"><p>Good good study, day day up.  :D </p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>NetEase Game</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Hangzhou
            </div>
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">no post found</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://fattymelon.github.io/2017/03/20/hello-world/">
                            <h3 class="media-heading">Hello World</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Mar 20, 2017
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://fattymelon.github.io/2017/04/20/raytracing1/">
                            <h3 class="media-heading">smallpt详解(一)</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Apr 20, 2017
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>本文主要是为了记录我学习smallpt的过程。第一部分是关于整个程序的大致分解。第二部分主要说一下我对main函数中cx和cy的理解。第三部分主要说明光线跟踪的每一行代码所用到的数学知识。<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://fattymelon.github.io/2017/04/22/raytracing2/">
                            <h3 class="media-heading">smallpt详解(二)</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Apr 22, 2017
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>本文主要说一下自己的理解，<br>关于smallpt的cx,cy是怎么来的，是用来做什么的？<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://fattymelon.github.io/2017/04/25/raytracing3/">
                            <h3 class="media-heading">smallpt详解(三)</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Apr 25, 2017
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>本文主要对smallpt的光线跟踪函数进行详细的解释<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://fattymelon.github.io/2017/05/24/hexo_access/">
                            <h3 class="media-heading">Hexo接入Gitment评论</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 24, 2017
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>做好博客之后想添加评论功能。第三方评论有多说，disqus，网易云跟帖等，但是多说即将关闭，disqus好不容易弄好，老是加载不出来，网易嘛，他申请的时候域名github.io已经被占用就不行了。所以就接入了国内大神做的<a href="https://github.com/imsun/gitment" target="_blank" rel="external">Gitment</a></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="no post found"
                data-message-one="1 post found"
                data-message-other="{n} posts found">
                5 posts found
            </p>
        </div>
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-ivwiy10zeb8fifc4swnhkwneuk64y53w2scmdmtp8thi9cqfxh31aowtroaz.min.js"></script>
<!--SCRIPTS END-->

    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('DHHFWX5CZY', '6ce750764d585dc1fd8b4ff7a8c0130a');
        var algoliaIndex = algoliaClient.initIndex('_post');
    </script>

    </body>
</html>
